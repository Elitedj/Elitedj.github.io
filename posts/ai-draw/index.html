<!doctype html><html lang=zh dir=ltr><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>做一个AI绘画魔法师 | Elitedj's Blog</title><meta name=generator content="Hugo Eureka 0.9.3"><link rel=stylesheet href=/css/eureka.min.9cec6350e37e534b0338fa9a085bf06855de3b0f2dcf857e792e5e97b07ea905d4d5513db554cbc26a9c3da622bae92d.css><script defer src=/js/eureka.min.fa9a6bf6d7a50bb635b4cca7d2ba5cf3dfb095ae3798773f1328f7950028b48c17d06276594e1b5f244a25a6c969a705.js></script>
<link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=preload href="https://fonts.googleapis.com/css2?family=Lora:wght@400;600;700&amp;family=Noto+Serif+SC:wght@400;600;700&amp;display=swap" as=style onload='this.onload=null,this.rel="stylesheet"'><link rel=stylesheet href=https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.4.0/build/styles/base16/solarized-light.min.css media=print onload='this.media="all",this.onload=null' crossorigin><script defer src=https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.4.0/build/highlight.min.js crossorigin></script>
<script defer src=https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.4.0/build/languages/dart.min.js crossorigin></script>
<link rel=stylesheet href=/css/highlightjs.min.2958991528e43eb6fc9b8c4f2b8e052f79c4010718e1d1e888a777620e9ee63021c2c57ec7417a3108019bb8c41943e6.css media=print onload='this.media="all",this.onload=null'><script defer type=text/javascript src=/js/fontawesome.min.8c77c7521b1f95ec2031c2a79f5c6a698aa4a0dba5ba649dfbc7f73994cddf3f494be6aac7e5724f35cbf72cfde09703.js></script>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css integrity=sha384-MlJdn/WNKDGXveldHDdyRP1R4CTHr3FeuDNfhsLPYrq2t0UBkUdK2jyTnXPEK1NQ media=print onload='this.media="all",this.onload=null' crossorigin><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.js integrity=sha384-VQ8d8WVFw0yHhCk5E8I86oOhv48xLpnDZx5T9GogA/Y84DcCKWXDmSDfn13bzFZY crossorigin></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/contrib/auto-render.min.js integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR crossorigin></script>
<script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}]})})</script><script defer src=https://cdn.jsdelivr.net/npm/mermaid@8.14.0/dist/mermaid.min.js integrity=sha384-atOyb0FxAgN9LyAc6PEf9BjgwLISyansgdH8/VXQH8p2o5vfrRgmGIJ2Sg22L0A0 crossorigin></script>
<link rel=icon type=image/png sizes=32x32 href=/images/avatar_hubecf9d80b8b876872272a68886c75e90_327995_32x32_fill_box_center_3.png><link rel=apple-touch-icon sizes=180x180 href=/images/avatar_hubecf9d80b8b876872272a68886c75e90_327995_180x180_fill_box_center_3.png><meta name=description content="第一次接触AI绘画是Make Girls Moe这个项目，通过调整面部的一些参数来生成二次元头像。2022年Stable Diffusion让AI绘画达到了一个新的"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"/posts/"},{"@type":"ListItem","position":2,"name":"做一个AI绘画魔法师","item":"/posts/ai-draw/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"/posts/ai-draw/"},"headline":"做一个AI绘画魔法师 | Elitedj\u0027s Blog","datePublished":"2023-02-27T13:03:59+08:00","dateModified":"2023-02-27T13:03:59+08:00","wordCount":1316,"publisher":{"@type":"Person","name":"Elitedj","logo":{"@type":"ImageObject","url":"/images/avatar.png"}},"description":"第一次接触AI绘画是Make Girls Moe这个项目，通过调整面部的一些参数来生成二次元头像。2022年Stable Diffusion让AI绘画达到了一个新的"}</script><meta property="og:title" content="做一个AI绘画魔法师 | Elitedj's Blog"><meta property="og:type" content="article"><meta property="og:image" content="/images/avatar.png"><meta property="og:url" content="/posts/ai-draw/"><meta property="og:description" content="第一次接触AI绘画是Make Girls Moe这个项目，通过调整面部的一些参数来生成二次元头像。2022年Stable Diffusion让AI绘画达到了一个新的"><meta property="og:locale" content="zh"><meta property="og:site_name" content="Elitedj's Blog"><meta property="article:published_time" content="2023-02-27T13:03:59+08:00"><meta property="article:modified_time" content="2023-02-27T13:03:59+08:00"><meta property="article:section" content="posts"><meta property="article:tag" content="AI"><meta property="article:tag" content="绘画"><meta property="article:tag" content="Stable Diffusion"><body class="flex min-h-screen flex-col"><header class="min-h-16 pl-scrollbar bg-secondary-bg fixed z-50 flex w-full items-center shadow-sm"><div class="mx-auto w-full max-w-screen-xl"><script>let storageColorScheme=localStorage.getItem("lightDarkMode");((storageColorScheme=="Auto"||storageColorScheme==null)&&window.matchMedia("(prefers-color-scheme: dark)").matches||storageColorScheme=="Dark")&&document.getElementsByTagName("html")[0].classList.add("dark")</script><nav class="flex items-center justify-between flex-wrap px-4 py-4 md:py-0"><a href=/ class="me-6 text-primary-text text-xl font-bold">Elitedj's Blog</a>
<button id=navbar-btn class="md:hidden flex items-center px-3 py-2" aria-label="Open Navbar">
<i class="fas fa-bars"></i></button><div id=target class="hidden block md:flex md:grow md:justify-between md:items-center w-full md:w-auto text-primary-text z-20"><div class="md:flex md:h-16 text-sm md:grow pb-4 md:pb-0 border-b md:border-b-0"><a href=/about class="block mt-4 md:inline-block md:mt-0 md:h-(16-4px) md:leading-(16-4px) box-border md:border-t-2 md:border-b-2 border-transparent me-4">About</a></div><div class=flex><div class="relative pt-4 md:pt-0"><div class="cursor-pointer hover:text-eureka" id=lightDarkMode><i class="fas fa-adjust"></i></div><div class="fixed hidden inset-0 opacity-0 h-full w-full cursor-default z-30" id=is-open></div><div class="absolute flex flex-col start-0 md:start-auto end-auto md:end-0 hidden bg-secondary-bg w-48 rounded py-2 border border-tertiary-bg cursor-pointer z-40" id=lightDarkOptions><span class="px-4 py-1 hover:text-eureka" name=Light>浅色</span>
<span class="px-4 py-1 hover:text-eureka" name=Dark>深色</span>
<span class="px-4 py-1 hover:text-eureka" name=Auto>自动</span></div></div></div></div><div class="fixed hidden inset-0 opacity-0 h-full w-full cursor-default z-0" id=is-open-mobile></div></nav><script>let element=document.getElementById("lightDarkMode");storageColorScheme==null||storageColorScheme=="Auto"?document.addEventListener("DOMContentLoaded",()=>{window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",switchDarkMode)}):storageColorScheme=="Light"?(element.firstElementChild.classList.remove("fa-adjust"),element.firstElementChild.setAttribute("data-icon","sun"),element.firstElementChild.classList.add("fa-sun")):storageColorScheme=="Dark"&&(element.firstElementChild.classList.remove("fa-adjust"),element.firstElementChild.setAttribute("data-icon","moon"),element.firstElementChild.classList.add("fa-moon")),document.addEventListener("DOMContentLoaded",()=>{getcolorscheme(),switchBurger()})</script></div></header><main class="grow pt-16"><div class=pl-scrollbar><div class="mx-auto w-full max-w-screen-xl lg:px-4 xl:px-8"><div class="grid grid-cols-2 gap-4 lg:grid-cols-8 lg:pt-12"><div class="lg:col-start-2 bg-secondary-bg col-span-2 rounded px-6 py-8 lg:col-span-6"><article class=prose><h1 class=mb-4>做一个AI绘画魔法师</h1><div class="text-tertiary-text not-prose mt-2 flex flex-row flex-wrap items-center"><div class="me-6 my-2"><i class="fas fa-calendar me-1"></i>
<span>2023-02-27</span></div><div class="me-6 my-2"><i class="fas fa-clock me-1"></i>
<span>3分钟阅读时长</span></div><div class="me-6 my-2"><i class="fas fa-folder me-1"></i>
<a href=/categories/ai/ class=hover:text-eureka>AI</a></div></div><p>第一次接触AI绘画是<a href=https://make.girls.moe/#/>Make Girls Moe</a>这个项目，通过调整面部的一些参数来生成二次元头像。2022年<a href=https://stability.ai/blog/stable-diffusion-announcement>Stable Diffusion</a>让AI绘画达到了一个新的高度，用户输入一段描述性文本，就可以得到一副精美的画，但画人物时手部结构容易错乱。</p><p>当某一天看到<a href=https://www.zhihu.com/question/584053473>如何评价2023年2月AI绘画的最新水平？&ndash; 知乎</a>这个帖子的时候，看到AI生成的图片实在是太逼真了，遂产生了自己也要动手玩一下的想法。</p><p>先看看成品</p><div align=center><img src=real_girl.png width=50%/>
<img src=00050-240742293.png width=50%/>
<img src=00075-2136548201.png width=50%/>
<img src=00109-2271564294.png width=50%/></div><p>AI偶尔也会抽风，这里放出来的是我尝试的几个模型中生成的较完美的作品，整体的效果让我感到非常的惊艳。现在网上也有很多的教程，模型也得到了共享，甚至很多人会分享出自己的Prompt，只需要傻瓜式照着做就能得到不错的效果。</p><p>下面分享一下我的搭建过程。</p><h2 id=搭建>搭建</h2><h3 id=服务器>服务器</h3><p>因为我现在手上没有算力较好的显卡，所以是搞了一个腾讯云的GPU服务器，服务器的参数如下：</p><ul><li>8核CPU</li><li>32GB内存</li><li>NVIDIA T4显卡</li><li>Ubuntu Server 18.04</li></ul><h3 id=stable-diffusion-web-ui>Stable Diffusion Web UI</h3><p><a href=https://github.com/AUTOMATIC1111/stable-diffusion-webui>Stable Diffusion Web UI</a>是一个Web站，能够方便的加载模型，调整模型参数，完成推理和训练过程，并且可以安装插件，拓展功能。</p><p>安装方法可以参考项目README，在安装之前，请确保python的版本是<code>3.10</code>以上，不然会安装报错。升级python版本可以参考<a href=https://cloudbytes.dev/snippets/upgrade-python-to-latest-version-on-ubuntu-linux>这个文章</a></p><p>如果在安装过程中出现<code>Couldn't install gfpgan</code>的问题，可以尝试将项目根目录的下<code>launch.py</code>中的<code>prepare_environment</code>方法中的所有<code>https://github.com/</code>替换成<code>https://ghproxy.com/https://github.com/</code>，然后保存并重新运行<code>./webui.sh</code>即可。</p><p>整个安装过程可能会非常的慢，需要下载非常多的依赖。安装完成后就可以通过<code>localhost:7860</code>访问到网站。</p><h3 id=模型>模型</h3><p><a href=https://civitai.com/>Civitai</a>上有非常多大家训练好并分享出来的模型，当然，这里面有很多「限制级」的东西。</p><p><code>checkpoint</code>类别的模型，需要放到<code>models/Stable-diffusion</code>路径下，而<code>LoRA</code>类别的模型需要放到<code>models/Lora</code>目录下。</p><p><a href=https://github.com/microsoft/LoRA>LoRA</a>指的是Low-Rank Adaptation of Large Language Models，<code>Stable Diffusion</code>是大模型，有非常多的参数，而<code>LoRA</code>可以微调一些参数，影响模型最终生成的效果。</p><p><code>Civitai</code>内有很多Prompt的分享，可以直接参考，效果都非常的不错。</p><h3 id=control-net>Control Net</h3><p><a href=https://github.com/lllyasviel/ControlNet>Control Net</a>可以「控制」模型生成的结果，比如控制生成的图片的人物姿势，非常的强大。当AI生成的手部结构不正常时，可以通过局部重绘加上<code>Control Net</code>来重新生成合理的手部结构，达到修复的效果。</p><h3 id=prompt>Prompt</h3><p>Prompt是影响模型生成效果的重要因素，合适的描述才能让AI画出自己想要的效果。网络上有很多总结的Prompt关键词，可以参考，比如<a href=https://www.yuque.com/longyuye/lmgcwy>这一篇</a></p><h2 id=最后>最后</h2><p>因为技能和时间的关系，没有去尝试自己训练一个模型，仅仅是参考网上的教程和现有的模型资源进行简单的尝试，但这已经感到非常的满足了。</p><p>在愉快的玩耍过后，冷静下来发现这里面存在很多非常危险的事情。最近AIGC大火，人们在讨论AI又让一大批人失业的时候，黑灰产已经利用AIGC来进行获利，如何有效的监管是值得思考的一个问题，对安全从业者来说也是一个巨大的冲击。</p></article><div class=my-4><a href=/tags/ai/ class="inline-block bg-tertiary-bg text-sm rounded px-3 py-1 my-1 me-2 hover:text-eureka">#AI</a>
<a href=/tags/%E7%BB%98%E7%94%BB/ class="inline-block bg-tertiary-bg text-sm rounded px-3 py-1 my-1 me-2 hover:text-eureka">#绘画</a>
<a href=/tags/stable-diffusion/ class="inline-block bg-tertiary-bg text-sm rounded px-3 py-1 my-1 me-2 hover:text-eureka">#Stable Diffusion</a></div><div class="-mx-2 mt-4 flex flex-col border-t px-2 pt-4 md:flex-row md:justify-between"><div><span class="text-primary-text block font-bold">上一页</span>
<a href=/posts/berrykv/ class=block>BerryKV: 基于Bitcask模型的KV存储</a></div><div class="mt-4 md:mt-0 md:text-right"><span class="text-primary-text block font-bold">下一页</span>
<a href=/posts/2022summary/ class=block>不知道怎么定义的2022</a></div></div><div id=valine-comments class=mt-4></div><script defer src=https://cdn.jsdelivr.net/npm/valine@1.4.16/dist/Valine.min.js integrity=sha384-e0+DNUCJo75aOAzHQbFWYBCM9/S4f0BhRJXvEgbE3mMS85RM20MSSGStHuNdY2QK crossorigin></script>
<script>document.addEventListener("DOMContentLoaded",function(){new Valine({el:"#valine-comments",appId:"zOEvCRaHczqQkvn7g5bk2d9c-gzGzoHsz",appKey:"JJQvXVH4XIDyjJaIK2HWeTY3"})})</script></div></div><script>document.addEventListener("DOMContentLoaded",()=>{hljs.highlightAll()})</script></div></div></main><footer class=pl-scrollbar><div class="mx-auto w-full max-w-screen-xl"><div class="text-center p-6 pin-b"><p class="text-sm text-tertiary-text">&copy; 2019 - 2023 <a href=https://github.com/Elitedj>Elitedj</a>
&#183; Powered by the <a href=https://github.com/wangchucheng/hugo-eureka class=hover:text-eureka>Eureka</a> theme for <a href=https://gohugo.io class=hover:text-eureka>Hugo</a></p></div></div></footer></body></html>